---
import Footer from "./Footer.astro";
import Card from "./ui/Card.astro";
import { items } from "@lib/categories";
---

<section
  class="bg-bgDrAgua flex justify-center items-center flex-col pt-40 gap-8 overflow-x-hidden"
  style="
border-bottom: 1px solid var(--Border-Color, #13254F);
"
>
  <h2
    style="color: var(--Pale-Color, #F2F6FF);
font-size: 14px;
font-style: normal;
font-weight: 400;
line-height: normal;
letter-spacing: 2.8px;"
  >
    <span class="text-white/75">INICIO</span> / CATEGORIAS
  </h2>
  <h1
    style="color: #FFF;
font-size: 36px;
font-style: normal;
font-weight: 800;
line-height: normal;"
  >
    Categorias
  </h1>
  <div class="flex flex-row justify-center items-center">
    <button
      data-sort="asc"
      class="sort-btn hover:text-white text-[#445A8B] transition-colors"
      style="font-size: 20px; font-style: normal; font-weight: 400; line-height: normal; letter-spacing: 4px;"
    >
      A-Z
    </button>
    <span
      style="color: var(--Others-Color, #445A8B); font-size: 20px; margin: 0 10px;"
      >|</span
    >
    <button
      data-sort="desc"
      class="sort-btn hover:text-white text-[#445A8B] transition-colors"
      style="font-size: 20px; font-style: normal; font-weight: 400; line-height: normal; letter-spacing: 4px;"
    >
      Z-A
    </button>
  </div>
  <div
    class="w-screen"
    style="width: 100vw; height: 1px; flex-shrink: 0; border-radius: 100px; background: radial-gradient(50% 50% at 50% 50%, #13254F 0%, rgba(19, 37, 79, 0.00) 100%);"
  >
  </div>
  <div class="grid grid-cols-5 gap-4 p-20" id="categories-grid">
    {
      items.map((item) => (
        <a
          href={`/categorias/${item.nombre}`}
          class="category-item"
          data-name={item.nombre}
        >
          <Card imgSrc={item.imgSrc} headingText={item.nombre} />
        </a>
      ))
    }
  </div>
</section>

<script>
  const categoriesGrid = document.getElementById("categories-grid");
  const sortButtons = document.querySelectorAll(".sort-btn");

  sortButtons.forEach((button) => {
    button.addEventListener("click", () => {
      const order = button.getAttribute("data-sort");
      const items = Array.from(categoriesGrid.children);

      items.sort((a, b) => {
        const nameA = a.getAttribute("data-name").toLowerCase();
        const nameB = b.getAttribute("data-name").toLowerCase();

        if (order === "asc") {
          return nameA.localeCompare(nameB);
        } else {
          return nameB.localeCompare(nameA);
        }
      });

      // Clear the grid and append sorted items
      items.forEach((item) => categoriesGrid.appendChild(item));
    });
  });
</script>
