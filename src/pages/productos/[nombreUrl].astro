---
import Layout from "@layouts/Layout.astro";
import { productos } from "@lib/products";
import { items } from "@lib/categories";

export async function getStaticPaths() {
    return productos
        .filter((producto) => producto.urlName && producto.urlName.length > 0)
        .map((producto) => ({
            params: { nombreUrl: producto.urlName },
        }));
}

const { nombreUrl } = Astro.params;
const producto = productos.find((p) => p.urlName === nombreUrl);

if (!producto) {
    return Astro.redirect("/404");
}

const categoria = items.find((item) => item.productos.includes(producto.id));
---

<Layout title={producto.nombre}>
    <section
        class="bg-bgDrAgua flex justify-center items-center flex-col pt-40 gap-8"
    >
        <h2 class="text-center px-1"
            style="color: var(--Pale-Color, #F2F6FF);
    font-size: clamp(12px, 2vw, 14px);
    font-style: normal;
    font-weight: 400;
    line-height: 1.4;
    letter-spacing: 2px;"
        >
            <a class="text-white/75" href="/">INICIO</a>
            <span class="text-white/75"> / </span>
            <a class="text-white/75" href="/categorias">CATEGORIAS</a>
            <span class="text-white/75"> / </span>
            <a class="text-white/75" href={`/categorias/${categoria.nombre}`}
                >{categoria.nombre}</a
            >
            <a class="text-white/75" href={`/marcas/${producto.marca}`}
                >{producto.marca}</a
            >
            <span class="text-white/75"> / </span>
            {producto.nombre}
        </h2>
        <div class="container mx-auto p-4">
            <div class="bg-[#03102A] border border-[#111E39] rounded-lg p-6">
                <div
                    class="flex flex-col md:flex-row gap-8 justify-center items-center"
                >
                    <div class="md:w-1/2">
                        <img
                            src={producto.fotoUrl}
                            alt={producto.nombre}
                            class="w-full h-auto rounded-lg"
                        />
                    </div>
                    <div class="md:w-1/2 text-[#93A0BC]">
                        <h1 class="text-3xl font-bold mb-4">
                            {producto.nombre}
                        </h1>
                        <div
                            class="prose prose-invert"
                            set:html={producto.descripcion}
                        />
                    </div>
                </div>
            </div>
        </div>
    </section>
</Layout>

<style>
    /* Table styles */
    :global(table) {
        width: 100%;
        border-collapse: collapse;
        margin: 0 0 1rem 0;
        background: rgba(3, 16, 42, 0.5);
        border-radius: 5px;
        margin-top: 10px;
        min-width: 300px;
    }

    @media (min-width: 800px) {
        :global(table) {
            min-width: 500px;
        }
    }

    :global(th),
    :global(td) {
        padding: 12px;
        text-align: left;
        border: 1px solid #111e39;
        color: var(--Paragraph-Color, #93a0bc);
    }

    :global(th) {
        background: rgba(17, 30, 57, 0.5);
        font-weight: 700;
        letter-spacing: 1.6px;
    }

    :global(tr:hover) {
        background: rgba(19, 37, 79, 0.3);
    }
</style>
